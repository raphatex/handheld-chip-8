ImagePack
=========

ImagePack is a utility for preparing large images for Chip8 programs. Images which cannot be drawn with a single `sprite` operation must be split into a sequential form intended for some sprite dimensions. ImagePack offers a number of options for the ordering and division of data, allowing for inexpensive transition animations and scrolls.

If a color image is provided, ImagePack will assume black is the blended color and transparent is the background color and arrange each sprite-sized chunk with data for plane 1 followed by plane 2.

Compiling:

	javac ImagePack.java
	java ImagePack
	usage: imagepack [--sprite=Y] [--order=XXXX] <image>

The `sprite` argument specifies the sprite chunk size the image should be divided into, where `Y` is the height of the Chip8 sprite. (1-15) If `Y` is 0 the SuperChip 16x16 sprite size will be used. (This is consistent with how Octo interprets sprite size arguments.) ImagePack can work with images which are larger or smaller than the entire Chip8 display but the input image must be evenly divisible into chunks of the specified size.

The `order` argument specifies the order in which sprite chunks will be stored. An order string consists of the letters `t`,`b`,`l`,`r` which stand for top, bottom, left and right, respectively. `t` and `b` are always grouped together as are `l` and `r`. The first pair of letters specifies the outer iteration order and the second pair specifies the inner iteration order. For example, you could read `tblr` as "top to bottom, left to right".

Data is arranged into continuous runs according to the inner iteration order and then those runs are arranged according to the outer iteration order. For example, a 3x3 matrix of sprite chunks in `tblr` order would be ordered as follows:

	1 2 3
	4 5 6
	7 8 9

While `tbrl` order would be ordered like this:

	3 2 1
	6 5 4
	9 8 7

And `rlbt` would be like:

	9 6 3
	8 5 2
	7 4 1

The possible orderings are thus `tblr`,`tbrl`,`btlr`,`btrl`,`lrtb`,`lrbt`,`rltb` and `rlbt`.

By default, ImagePack assumes an 8x8 sprite and the ordering `tblr`.

	java ImagePack example.png --sprite=1 --order=tbrl
	# color 0: 0x00FFFFFF
	# color 1: 0xFF000000
	: example # (256 bytes)
		0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF
		0x01 0x00 0x00 0x00 0x00 0x00 0x00 0x80
		0x01 0x00 0x03 0x00 0x00 0x00 0x00 0x80
		0x01 0x00 0x03 0x00 0x00 0x00 0x00 0x80
		0x81 0x07 0x03 0x00 0xF0 0x00 0x00 0x80
		0xC1 0x9F 0x79 0x00 0xF0 0x01 0xF8 0x80
		0xC1 0x9F 0xFD 0xFE 0xF8 0x33 0xF8 0x83
		0xC1 0x99 0xED 0xFE 0xBB 0xB3 0xDB 0x83
		0x81 0x9F 0xFD 0xB6 0x1B 0xF3 0x3B 0x83
		0x01 0x9F 0x7D 0xB6 0x7B 0xF0 0xF9 0x83
		0x61 0xD8 0x61 0x87 0xFD 0x7C 0xE0 0x83
		0xE1 0xDD 0x61 0x87 0xDD 0xFE 0x86 0x83
		0xE1 0xDF 0x60 0x87 0xFD 0xEE 0xFE 0x83
		0x81 0xCF 0x70 0x06 0xFC 0xC0 0xFE 0x81
		0x01 0xC0 0x30 0x00 0x00 0x00 0x00 0x80
		0x01 0x00 0x30 0x00 0x00 0x00 0x00 0x80
		0x01 0x00 0x30 0x00 0x00 0x00 0x60 0x80
		0x01 0x00 0x00 0x00 0x00 0x00 0x70 0x80
		0x01 0x00 0x00 0x00 0xC0 0x30 0x70 0x80
		0x01 0x00 0xC0 0x01 0xC0 0x30 0x30 0x80
		0x01 0xF8 0xE1 0x07 0xC0 0x00 0x30 0x80
		0x01 0xFC 0xE7 0x87 0xC3 0xD8 0x37 0x80
		0x01 0x1C 0x77 0xF6 0xF7 0xED 0x3F 0x80
		0x01 0x1C 0x37 0xF8 0xFF 0xED 0x3C 0x80
		0x01 0xBC 0xF3 0x5B 0x67 0x6C 0x18 0x80
		0x01 0xF8 0x3B 0x5B 0x67 0x6C 0x18 0x80
		0x01 0xF0 0xF9 0x1B 0x63 0xEC 0x1C 0x80
		0x01 0x80 0xF1 0x1B 0x63 0xEC 0x1F 0x80
		0x01 0x80 0xF1 0x19 0x63 0xCC 0x1F 0x80
		0x01 0x80 0x01 0x00 0x60 0x0C 0x1F 0x80
		0x01 0x00 0x00 0x00 0x00 0x00 0x00 0x80
		0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF

Here is an Octo program which displays the above image data with the specified ordering and sprite size:

	: main
		va := 56  # x
		vb := 0   # y
		vc := 1   # stride
		i := example
		loop
			sprite va vb 1
			i  += vc
			va += -8
			if va == -8 then vb +=  1
			if va == -8 then va := 56
			if vb != 32 then
		again
		loop again
